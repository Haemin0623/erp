<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="buyerns">

	<select id="list" resultType="buyer">
		select	* 
		from 	m_buyer order by adddate desc
	</select>
	<insert id="insert" parameterType="buyer">
		insert 	into m_buyer 
		values (#{buyerCd}, 
				#{countryCd},
				#{bname},
				#{manager},
				#{address},
				#{tel},
				#{email},
				sysdate,
				'N', 
				null
				)
	</insert>
	<update id="delete" parameterType="String">
		update 	m_buyer 
		set 	del='Y', 
				statusdate = sysdate 
		where 	buyer_cd=#{buyerCd}	
	</update>
	<update id="update" parameterType="buyer" > <!-- 테이블에서 바로 수정가능하게 기능 -->
		update 	m_buyer 
		set 	bname = #{bname},
				manager = #{manager},
				tel = #{tel},
				email = #{email},
				address = #{address},
				country_cd = #{countryCd},
				del ='N', 
				statusdate = sysdate
		where  buyer_cd=#{buyerCd}
	</update>
	<select id="search" parameterType="buyer" resultType="buyer">
		select 	* 
		from 	m_buyer
		<where>
			<if test="buyerCd != null and buyerCd != ''">
				buyer_cd like '%' || #{buyerCd} || '%'
			</if>
			<if test="bname != null and bname != ''">
				and bname like '%' || #{bname} || '%'
			</if>
			<if test="manager != null and manager != 'null'">
				and manager like '%' || #{manager} || '%'
			</if>
			<if test="countryCd != null and countryCd != 'null'">
				and country_Cd like '%' || #{countryCd} || '%'
			</if>
			<if test="tel != null and tel != 'null'">
				and tel like '%' || #{tel} || '%'
			</if>
			<if test="email != null and email != 'null'">
				and email like '%' || #{email} || '%'
			</if>
			<if test="address != null and address != 'null'">
				and address like '%' || #{address} || '%'
			</if>
		</where>
		
	</select>
</mapper>