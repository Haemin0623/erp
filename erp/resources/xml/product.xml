<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="productns">
		<select id="productList" parameterType="map" resultType="Product">
			select 	* 
			from 	(select a.*, rowNum rn from 
						(select * from m_product
						<where>
							<if test="product.productCd!=null and product.productCd!=''">
									product_cd like '%' || #{product.productCd} || '%'
							</if>
							<if test="product.pname!=null and product.pname!=''">
									and pname like '%' || #{product.pname} || '%'
							</if>
							<if test="product.volume!=null and product.volume!=''">
									and volume like '%' || #{product.volume} || '%'
							</if>
							<if test="product.unit!=null and product.unit!=''">
									and unit like '%' || #{product.unit} || '%'
							</if>
							<if test="product.category!=null and product.category!=''">
									and category like '%' || #{product.category} || '%'
							</if>
							<if test="product.adddate!=null and product.adddate!=''and product.adddate2!=null and product.adddate2!=''" >
									and adddate between #{product.adddate} and #{product.adddate2} 
							</if>
						</where>
						order by adddate desc)
					a) 
			where 	rn between #{pagingBean.startRow} and #{pagingBean.endRow}
		</select>
		<select id="getTotal" parameterType="map" resultType="integer">
			select 	count(*) 
			from	m_product
				<where>
					<if test="product.productCd!=null and product.productCd!=''">
							product_cd like '%' || #{product.productCd} || '%'
					</if>
					<if test="product.pname!=null and product.pname!=''">
							and pname like '%' || #{product.pname} || '%'
					</if>
					<if test="product.volume!=null and product.volume!=''">
							and volume like '%' || #{product.volume} || '%'
					</if>
					<if test="product.unit!=null and product.unit!=''">
							and unit like '%' || #{product.unit} || '%'
					</if>
					<if test="product.category!=null and product.category!=''">
							and category like '%' || #{product.category} || '%'
					</if>
					<if test="product.adddate!=null and product.adddate!=''and product.adddate2!=null and product.adddate2!=''" >
							and adddate between #{product.adddate} and #{product.adddate2} 
					</if>
				</where>
		</select>
		
	</mapper>